!(function (d3) {

$("acontent").empty();



var data = 
    
    [
 {
   "Day": "2018-01-27",
   "Time": "0:00:00",
   "Energy": 0.73882
 },
 {
   "Day": "2018-01-27",
   "Time": "1:00:00",
   "Energy": 0.65903
 },
 {
   "Day": "2018-01-27",
   "Time": "2:00:00",
   "Energy": 1.17375
 },
 {
   "Day": "2018-01-27",
   "Time": "3:00:00",
   "Energy": 1.51196
 },
 {
   "Day": "2018-01-27",
   "Time": "4:00:00",
   "Energy": 0.67532
 },
 {
   "Day": "2018-01-27",
   "Time": "5:00:00",
   "Energy": 1.65155
 },
 {
   "Day": "2018-01-27",
   "Time": "6:00:00",
   "Energy": 5.17441
 },
 {
   "Day": "2018-01-27",
   "Time": "7:00:00",
   "Energy": 5.05492
 },
 {
   "Day": "2018-01-27",
   "Time": "8:00:00",
   "Energy": 6.06533
 },
 {
   "Day": "2018-01-27",
   "Time": "9:00:00",
   "Energy": 5.39052
 },
 {
   "Day": "2018-01-27",
   "Time": "10:00:00",
   "Energy": 3.57429
 },
 {
   "Day": "2018-01-27",
   "Time": "11:00:00",
   "Energy": 2.37055
 },
 {
   "Day": "2018-01-27",
   "Time": "12:00:00",
   "Energy": 2.0982
 },
 {
   "Day": "2018-01-27",
   "Time": "13:00:00",
   "Energy": 2.68573
 },
 {
   "Day": "2018-01-27",
   "Time": "14:00:00",
   "Energy": 1.27088
 },
 {
   "Day": "2018-01-27",
   "Time": "15:00:00",
   "Energy": 1.25615
 },
 {
   "Day": "2018-01-27",
   "Time": "16:00:00",
   "Energy": 1.09114
 },
 {
   "Day": "2018-01-27",
   "Time": "17:00:00",
   "Energy": 1.98792
 },
 {
   "Day": "2018-01-27",
   "Time": "18:00:00",
   "Energy": 3.22534
 },
 {
   "Day": "2018-01-27",
   "Time": "19:00:00",
   "Energy": 3.82002
 },
 {
   "Day": "2018-01-27",
   "Time": "20:00:00",
   "Energy": 1.00163
 },
 {
   "Day": "2018-01-27",
   "Time": "21:00:00",
   "Energy": 5.34064
 },
 {
   "Day": "2018-01-27",
   "Time": "22:00:00",
   "Energy": 1.04693
 },
 {
   "Day": "2018-01-27",
   "Time": "23:00:00",
   "Energy": 3.9553
 },
 {
   "Day": "2018-01-28",
   "Time": "0:00:00",
   "Energy": 0.78807
 },
 {
   "Day": "2018-01-28",
   "Time": "1:00:00",
   "Energy": 0.74669
 },
 {
   "Day": "2018-01-28",
   "Time": "2:00:00",
   "Energy": 0.72779
 },
 {
   "Day": "2018-01-28",
   "Time": "3:00:00",
   "Energy": 0.76055
 },
 {
   "Day": "2018-01-28",
   "Time": "4:00:00",
   "Energy": 0.74389
 },
 {
   "Day": "2018-01-28",
   "Time": "5:00:00",
   "Energy": 0.7153
 },
 {
   "Day": "2018-01-28",
   "Time": "6:00:00",
   "Energy": 4.10511
 },
 {
   "Day": "2018-01-28",
   "Time": "7:00:00",
   "Energy": 5.28142
 },
 {
   "Day": "2018-01-28",
   "Time": "8:00:00",
   "Energy": 6.55932
 },
 {
   "Day": "2018-01-28",
   "Time": "9:00:00",
   "Energy": 4.89548
 },
 {
   "Day": "2018-01-28",
   "Time": "10:00:00",
   "Energy": 0.68885
 },
 {
   "Day": "2018-01-28",
   "Time": "11:00:00",
   "Energy": 0.76815
 },
 {
   "Day": "2018-01-28",
   "Time": "12:00:00",
   "Energy": 1.0685
 },
 {
   "Day": "2018-01-28",
   "Time": "13:00:00",
   "Energy": 0.91549
 },
 {
   "Day": "2018-01-28",
   "Time": "14:00:00",
   "Energy": 1.19524
 },
 {
   "Day": "2018-01-28",
   "Time": "15:00:00",
   "Energy": 2.15128
 },
 {
   "Day": "2018-01-28",
   "Time": "16:00:00",
   "Energy": 2.76161
 },
 {
   "Day": "2018-01-28",
   "Time": "17:00:00",
   "Energy": 1.7512
 },
 {
   "Day": "2018-01-28",
   "Time": "18:00:00",
   "Energy": 1.7854
 },
 {
   "Day": "2018-01-28",
   "Time": "19:00:00",
   "Energy": 1.0661
 },
 {
   "Day": "2018-01-28",
   "Time": "20:00:00",
   "Energy": 1.08203
 },
 {
   "Day": "2018-01-28",
   "Time": "21:00:00",
   "Energy": 1.03034
 },
 {
   "Day": "2018-01-28",
   "Time": "22:00:00",
   "Energy": 0.9879
 },
 {
   "Day": "2018-01-28",
   "Time": "23:00:00",
   "Energy": 0.86031
 },
 {
   "Day": "2018-01-29",
   "Time": "0:00:00",
   "Energy": 0.71973
 },
 {
   "Day": "2018-01-29",
   "Time": "1:00:00",
   "Energy": 0.66381
 },
 {
   "Day": "2018-01-29",
   "Time": "2:00:00",
   "Energy": 0.73655
 },
 {
   "Day": "2018-01-29",
   "Time": "3:00:00",
   "Energy": 0.74974
 },
 {
   "Day": "2018-01-29",
   "Time": "4:00:00",
   "Energy": 0.78291
 },
 {
   "Day": "2018-01-29",
   "Time": "5:00:00",
   "Energy": 0.67466
 },
 {
   "Day": "2018-01-29",
   "Time": "6:00:00",
   "Energy": 5.65876
 },
 {
   "Day": "2018-01-29",
   "Time": "7:00:00",
   "Energy": 4.7729
 },
 {
   "Day": "2018-01-29",
   "Time": "8:00:00",
   "Energy": 1.02286
 },
 {
   "Day": "2018-01-29",
   "Time": "9:00:00",
   "Energy": 2.39658
 },
 {
   "Day": "2018-01-29",
   "Time": "10:00:00",
   "Energy": 0.99172
 },
 {
   "Day": "2018-01-29",
   "Time": "11:00:00",
   "Energy": 2.6855
 },
 {
   "Day": "2018-01-29",
   "Time": "12:00:00",
   "Energy": 0.88072
 },
 {
   "Day": "2018-01-29",
   "Time": "13:00:00",
   "Energy": 0.73361
 },
 {
   "Day": "2018-01-29",
   "Time": "14:00:00",
   "Energy": 0.86291
 },
 {
   "Day": "2018-01-29",
   "Time": "15:00:00",
   "Energy": 0.81853
 },
 {
   "Day": "2018-01-29",
   "Time": "16:00:00",
   "Energy": 0.79459
 },
 {
   "Day": "2018-01-29",
   "Time": "17:00:00",
   "Energy": 1.22074
 },
 {
   "Day": "2018-01-29",
   "Time": "18:00:00",
   "Energy": 2.3218
 },
 {
   "Day": "2018-01-29",
   "Time": "19:00:00",
   "Energy": 3.51879
 },
 {
   "Day": "2018-01-29",
   "Time": "20:00:00",
   "Energy": 1.86779
 },
 {
   "Day": "2018-01-29",
   "Time": "21:00:00",
   "Energy": 1.05052
 },
 {
   "Day": "2018-01-29",
   "Time": "22:00:00",
   "Energy": 1.43325
 },
 {
   "Day": "2018-01-29",
   "Time": "23:00:00",
   "Energy": 1.12786
 },
 {
   "Day": "2018-01-30",
   "Time": "0:00:00",
   "Energy": 0.90224
 },
 {
   "Day": "2018-01-30",
   "Time": "1:00:00",
   "Energy": 0.78633
 },
 {
   "Day": "2018-01-30",
   "Time": "2:00:00",
   "Energy": 0.75018
 },
 {
   "Day": "2018-01-30",
   "Time": "3:00:00",
   "Energy": 0.93102
 },
 {
   "Day": "2018-01-30",
   "Time": "4:00:00",
   "Energy": 0.76157
 },
 {
   "Day": "2018-01-30",
   "Time": "5:00:00",
   "Energy": 0.79895
 },
 {
   "Day": "2018-01-30",
   "Time": "6:00:00",
   "Energy": 1.98592
 },
 {
   "Day": "2018-01-30",
   "Time": "7:00:00",
   "Energy": 6.25825
 },
 {
   "Day": "2018-01-30",
   "Time": "8:00:00",
   "Energy": 3.20405
 },
 {
   "Day": "2018-01-30",
   "Time": "9:00:00",
   "Energy": 2.01049
 },
 {
   "Day": "2018-01-30",
   "Time": "10:00:00",
   "Energy": 1.41811
 },
 {
   "Day": "2018-01-30",
   "Time": "11:00:00",
   "Energy": 1.77674
 },
 {
   "Day": "2018-01-30",
   "Time": "12:00:00",
   "Energy": 1.52607
 },
 {
   "Day": "2018-01-30",
   "Time": "13:00:00",
   "Energy": 0.95435
 },
 {
   "Day": "2018-01-30",
   "Time": "14:00:00",
   "Energy": 1.1389
 },
 {
   "Day": "2018-01-30",
   "Time": "15:00:00",
   "Energy": 1.01139
 },
 {
   "Day": "2018-01-30",
   "Time": "16:00:00",
   "Energy": 0.95386
 },
 {
   "Day": "2018-01-30",
   "Time": "17:00:00",
   "Energy": 1.02017
 },
 {
   "Day": "2018-01-30",
   "Time": "18:00:00",
   "Energy": 1.70885
 },
 {
   "Day": "2018-01-30",
   "Time": "19:00:00",
   "Energy": 1.12938
 },
 {
   "Day": "2018-01-30",
   "Time": "20:00:00",
   "Energy": 1.29194
 },
 {
   "Day": "2018-01-30",
   "Time": "21:00:00",
   "Energy": 1.06186
 },
 {
   "Day": "2018-01-30",
   "Time": "22:00:00",
   "Energy": 0.88967
 },
 {
   "Day": "2018-01-30",
   "Time": "23:00:00",
   "Energy": 1.01901
 },
 {
   "Day": "2018-01-31",
   "Time": "0:00:00",
   "Energy": 0.90014
 },
 {
   "Day": "2018-01-31",
   "Time": "1:00:00",
   "Energy": 0.79075
 },
 {
   "Day": "2018-01-31",
   "Time": "2:00:00",
   "Energy": 0.72798
 },
 {
   "Day": "2018-01-31",
   "Time": "3:00:00",
   "Energy": 0.78032
 },
 {
   "Day": "2018-01-31",
   "Time": "4:00:00",
   "Energy": 1.01156
 },
 {
   "Day": "2018-01-31",
   "Time": "5:00:00",
   "Energy": 0.96831
 },
 {
   "Day": "2018-01-31",
   "Time": "6:00:00",
   "Energy": 1.00435
 },
 {
   "Day": "2018-01-31",
   "Time": "7:00:00",
   "Energy": 1.00629
 },
 {
   "Day": "2018-01-31",
   "Time": "8:00:00",
   "Energy": 4.25223
 },
 {
   "Day": "2018-01-31",
   "Time": "9:00:00",
   "Energy": 1.13942
 },
 {
   "Day": "2018-01-31",
   "Time": "10:00:00",
   "Energy": 1.4801
 },
 {
   "Day": "2018-01-31",
   "Time": "11:00:00",
   "Energy": 2.36357
 },
 {
   "Day": "2018-01-31",
   "Time": "12:00:00",
   "Energy": 0.85807
 },
 {
   "Day": "2018-01-31",
   "Time": "13:00:00",
   "Energy": 0.77458
 },
 {
   "Day": "2018-01-31",
   "Time": "14:00:00",
   "Energy": 1.15608
 },
 {
   "Day": "2018-01-31",
   "Time": "15:00:00",
   "Energy": 0.84199
 },
 {
   "Day": "2018-01-31",
   "Time": "16:00:00",
   "Energy": 0.89556
 },
 {
   "Day": "2018-01-31",
   "Time": "17:00:00",
   "Energy": 2.97179
 },
 {
   "Day": "2018-01-31",
   "Time": "18:00:00",
   "Energy": 2.46711
 },
 {
   "Day": "2018-01-31",
   "Time": "19:00:00",
   "Energy": 1.18968
 },
 {
   "Day": "2018-01-31",
   "Time": "20:00:00",
   "Energy": 1.18543
 },
 {
   "Day": "2018-01-31",
   "Time": "21:00:00",
   "Energy": 1.20127
 },
 {
   "Day": "2018-01-31",
   "Time": "22:00:00",
   "Energy": 1.0992
 },
 {
   "Day": "2018-01-31",
   "Time": "23:00:00",
   "Energy": 1.03488
 },
 {
   "Day": "2018-02-01",
   "Time": "0:00:00",
   "Energy": 0.81073
 },
 {
   "Day": "2018-02-01",
   "Time": "1:00:00",
   "Energy": 0.85403
 },
 {
   "Day": "2018-02-01",
   "Time": "2:00:00",
   "Energy": 0.7794
 },
 {
   "Day": "2018-02-01",
   "Time": "3:00:00",
   "Energy": 1.00127
 },
 {
   "Day": "2018-02-01",
   "Time": "4:00:00",
   "Energy": 0.77249
 },
 {
   "Day": "2018-02-01",
   "Time": "5:00:00",
   "Energy": 1.36684
 },
 {
   "Day": "2018-02-01",
   "Time": "6:00:00",
   "Energy": 5.35188
 },
 {
   "Day": "2018-02-01",
   "Time": "7:00:00",
   "Energy": 0.93018
 },
 {
   "Day": "2018-02-01",
   "Time": "8:00:00",
   "Energy": 0.84715
 },
 {
   "Day": "2018-02-01",
   "Time": "9:00:00",
   "Energy": 1.10343
 },
 {
   "Day": "2018-02-01",
   "Time": "10:00:00",
   "Energy": 0.89612
 },
 {
   "Day": "2018-02-01",
   "Time": "11:00:00",
   "Energy": 1.58759
 },
 {
   "Day": "2018-02-01",
   "Time": "12:00:00",
   "Energy": 1.60384
 },
 {
   "Day": "2018-02-01",
   "Time": "13:00:00",
   "Energy": 1.94725
 },
 {
   "Day": "2018-02-01",
   "Time": "14:00:00",
   "Energy": 1.90395
 },
 {
   "Day": "2018-02-01",
   "Time": "15:00:00",
   "Energy": 2.09041
 },
 {
   "Day": "2018-02-01",
   "Time": "16:00:00",
   "Energy": 2.52799
 },
 {
   "Day": "2018-02-01",
   "Time": "17:00:00",
   "Energy": 1.90261
 },
 {
   "Day": "2018-02-01",
   "Time": "18:00:00",
   "Energy": 2.19445
 },
 {
   "Day": "2018-02-01",
   "Time": "19:00:00",
   "Energy": 1.38733
 },
 {
   "Day": "2018-02-01",
   "Time": "20:00:00",
   "Energy": 1.44442
 },
 {
   "Day": "2018-02-01",
   "Time": "21:00:00",
   "Energy": 1.33386
 },
 {
   "Day": "2018-02-01",
   "Time": "22:00:00",
   "Energy": 1.31783
 },
 {
   "Day": "2018-02-01",
   "Time": "23:00:00",
   "Energy": 1.00867
 },
 {
   "Day": "2018-02-02",
   "Time": "0:00:00",
   "Energy": 0.97028
 },
 {
   "Day": "2018-02-02",
   "Time": "1:00:00",
   "Energy": 0.76058
 },
 {
   "Day": "2018-02-02",
   "Time": "2:00:00",
   "Energy": 0.84731
 },
 {
   "Day": "2018-02-02",
   "Time": "3:00:00",
   "Energy": 0.78957
 },
 {
   "Day": "2018-02-02",
   "Time": "4:00:00",
   "Energy": 0.80756
 },
 {
   "Day": "2018-02-02",
   "Time": "5:00:00",
   "Energy": 4.44178
 },
 {
   "Day": "2018-02-02",
   "Time": "6:00:00",
   "Energy": 1.12893
 },
 {
   "Day": "2018-02-02",
   "Time": "7:00:00",
   "Energy": 0.89532
 },
 {
   "Day": "2018-02-02",
   "Time": "8:00:00",
   "Energy": 0.9632
 },
 {
   "Day": "2018-02-02",
   "Time": "9:00:00",
   "Energy": 3.72751
 },
 {
   "Day": "2018-02-02",
   "Time": "10:00:00",
   "Energy": 3.17183
 },
 {
   "Day": "2018-02-02",
   "Time": "11:00:00",
   "Energy": 1.11408
 },
 {
   "Day": "2018-02-02",
   "Time": "12:00:00",
   "Energy": 1.30763
 },
 {
   "Day": "2018-02-02",
   "Time": "13:00:00",
   "Energy": 0.84179
 },
 {
   "Day": "2018-02-02",
   "Time": "14:00:00",
   "Energy": 0.87934
 },
 {
   "Day": "2018-02-02",
   "Time": "15:00:00",
   "Energy": 0.8878
 },
 {
   "Day": "2018-02-02",
   "Time": "16:00:00",
   "Energy": 0.8454
 },
 {
   "Day": "2018-02-02",
   "Time": "17:00:00",
   "Energy": 1.39963
 },
 {
   "Day": "2018-02-02",
   "Time": "18:00:00",
   "Energy": 1.836
 },
 {
   "Day": "2018-02-02",
   "Time": "19:00:00",
   "Energy": 1.65363
 },
 {
   "Day": "2018-02-02",
   "Time": "20:00:00",
   "Energy": 1.1759
 },
 {
   "Day": "2018-02-02",
   "Time": "21:00:00",
   "Energy": 1.19853
 },
 {
   "Day": "2018-02-02",
   "Time": "22:00:00",
   "Energy": 1.10706
 },
 {
   "Day": "2018-02-02",
   "Time": "23:00:00",
   "Energy": 0.96704
 },
 {
   "Day": "2018-02-03",
   "Time": "0:00:00",
   "Energy": 0.85339
 },
 {
   "Day": "2018-02-03",
   "Time": "1:00:00",
   "Energy": 0.82153
 },
 {
   "Day": "2018-02-03",
   "Time": "2:00:00",
   "Energy": 0.80211
 },
 {
   "Day": "2018-02-03",
   "Time": "3:00:00",
   "Energy": 0.80725
 },
 {
   "Day": "2018-02-03",
   "Time": "4:00:00",
   "Energy": 0.82023
 },
 {
   "Day": "2018-02-03",
   "Time": "5:00:00",
   "Energy": 0.74517
 },
 {
   "Day": "2018-02-03",
   "Time": "6:00:00",
   "Energy": 1.11647
 },
 {
   "Day": "2018-02-03",
   "Time": "7:00:00",
   "Energy": 0.94894
 },
 {
   "Day": "2018-02-03",
   "Time": "8:00:00",
   "Energy": 1.26602
 },
 {
   "Day": "2018-02-03",
   "Time": "9:00:00",
   "Energy": 2.53033
 },
 {
   "Day": "2018-02-03",
   "Time": "10:00:00",
   "Energy": 2.44314
 },
 {
   "Day": "2018-02-03",
   "Time": "11:00:00",
   "Energy": 1.02364
 },
 {
   "Day": "2018-02-03",
   "Time": "12:00:00",
   "Energy": 1.00277
 },
 {
   "Day": "2018-02-03",
   "Time": "13:00:00",
   "Energy": 0.99117
 },
 {
   "Day": "2018-02-03",
   "Time": "14:00:00",
   "Energy": 1.01968
 },
 {
   "Day": "2018-02-03",
   "Time": "15:00:00",
   "Energy": 1.05395
 },
 {
   "Day": "2018-02-03",
   "Time": "16:00:00",
   "Energy": 1.01779
 },
 {
   "Day": "2018-02-03",
   "Time": "17:00:00",
   "Energy": 2.08937
 },
 {
   "Day": "2018-02-03",
   "Time": "18:00:00",
   "Energy": 2.56403
 },
 {
   "Day": "2018-02-03",
   "Time": "19:00:00",
   "Energy": 1.41914
 },
 {
   "Day": "2018-02-03",
   "Time": "20:00:00",
   "Energy": 1.16045
 },
 {
   "Day": "2018-02-03",
   "Time": "21:00:00",
   "Energy": 1.11729
 },
 {
   "Day": "2018-02-03",
   "Time": "22:00:00",
   "Energy": 1.03548
 },
 {
   "Day": "2018-02-03",
   "Time": "23:00:00",
   "Energy": 1.00124
 },
 {
   "Day": "2018-02-04",
   "Time": "0:00:00",
   "Energy": 0.91285
 },
 {
   "Day": "2018-02-04",
   "Time": "1:00:00",
   "Energy": 0.86493
 },
 {
   "Day": "2018-02-04",
   "Time": "2:00:00",
   "Energy": 0.84166
 },
 {
   "Day": "2018-02-04",
   "Time": "3:00:00",
   "Energy": 0.83671
 },
 {
   "Day": "2018-02-04",
   "Time": "4:00:00",
   "Energy": 0.84593
 },
 {
   "Day": "2018-02-04",
   "Time": "5:00:00",
   "Energy": 0.80661
 },
 {
   "Day": "2018-02-04",
   "Time": "6:00:00",
   "Energy": 0.87588
 },
 {
   "Day": "2018-02-04",
   "Time": "7:00:00",
   "Energy": 1.21137
 },
 {
   "Day": "2018-02-04",
   "Time": "8:00:00",
   "Energy": 1.1958
 },
 {
   "Day": "2018-02-04",
   "Time": "9:00:00",
   "Energy": 2.87129
 },
 {
   "Day": "2018-02-04",
   "Time": "10:00:00",
   "Energy": 0.97703
 },
 {
   "Day": "2018-02-04",
   "Time": "11:00:00",
   "Energy": 1.08345
 },
 {
   "Day": "2018-02-04",
   "Time": "12:00:00",
   "Energy": 0.9995
 },
 {
   "Day": "2018-02-04",
   "Time": "13:00:00",
   "Energy": 1.41829
 },
 {
   "Day": "2018-02-04",
   "Time": "14:00:00",
   "Energy": 4.19819
 },
 {
   "Day": "2018-02-04",
   "Time": "15:00:00",
   "Energy": 2.44531
 },
 {
   "Day": "2018-02-04",
   "Time": "16:00:00",
   "Energy": 2.26755
 },
 {
   "Day": "2018-02-04",
   "Time": "17:00:00",
   "Energy": 0.85349
 },
 {
   "Day": "2018-02-04",
   "Time": "18:00:00",
   "Energy": 2.49311
 },
 {
   "Day": "2018-02-04",
   "Time": "19:00:00",
   "Energy": 1.7921
 },
 {
   "Day": "2018-02-04",
   "Time": "20:00:00",
   "Energy": 1.31011
 },
 {
   "Day": "2018-02-04",
   "Time": "21:00:00",
   "Energy": 1.11907
 },
 {
   "Day": "2018-02-04",
   "Time": "22:00:00",
   "Energy": 1.17712
 },
 {
   "Day": "2018-02-04",
   "Time": "23:00:00",
   "Energy": 0.88122
 },
 {
   "Day": "2018-02-05",
   "Time": "0:00:00",
   "Energy": 0.86541
 },
 {
   "Day": "2018-02-05",
   "Time": "1:00:00",
   "Energy": 0.72918
 },
 {
   "Day": "2018-02-05",
   "Time": "2:00:00",
   "Energy": 0.79579
 },
 {
   "Day": "2018-02-05",
   "Time": "3:00:00",
   "Energy": 0.71947
 },
 {
   "Day": "2018-02-05",
   "Time": "4:00:00",
   "Energy": 0.79201
 },
 {
   "Day": "2018-02-05",
   "Time": "5:00:00",
   "Energy": 0.73509
 },
 {
   "Day": "2018-02-05",
   "Time": "6:00:00",
   "Energy": 0.79743
 },
 {
   "Day": "2018-02-05",
   "Time": "7:00:00",
   "Energy": 1.35255
 },
 {
   "Day": "2018-02-05",
   "Time": "8:00:00",
   "Energy": 1.05946
 },
 {
   "Day": "2018-02-05",
   "Time": "9:00:00",
   "Energy": 1.26807
 },
 {
   "Day": "2018-02-05",
   "Time": "10:00:00",
   "Energy": 1.22181
 },
 {
   "Day": "2018-02-05",
   "Time": "11:00:00",
   "Energy": 0.92747
 },
 {
   "Day": "2018-02-05",
   "Time": "12:00:00",
   "Energy": 0.88658
 },
 {
   "Day": "2018-02-05",
   "Time": "13:00:00",
   "Energy": 2.55691
 },
 {
   "Day": "2018-02-05",
   "Time": "14:00:00",
   "Energy": 0.96452
 },
 {
   "Day": "2018-02-05",
   "Time": "15:00:00",
   "Energy": 0.98909
 },
 {
   "Day": "2018-02-05",
   "Time": "16:00:00",
   "Energy": 0.87826
 },
 {
   "Day": "2018-02-05",
   "Time": "17:00:00",
   "Energy": 1.07363
 },
 {
   "Day": "2018-02-05",
   "Time": "18:00:00",
   "Energy": 2.70127
 },
 {
   "Day": "2018-02-05",
   "Time": "19:00:00",
   "Energy": 1.98337
 },
 {
   "Day": "2018-02-05",
   "Time": "20:00:00",
   "Energy": 0.9658
 },
 {
   "Day": "2018-02-05",
   "Time": "21:00:00",
   "Energy": 1.11441
 },
 {
   "Day": "2018-02-05",
   "Time": "22:00:00",
   "Energy": 1.01034
 },
 {
   "Day": "2018-02-05",
   "Time": "23:00:00",
   "Energy": 0.98786
 },
 {
   "Day": "2018-02-06",
   "Time": "0:00:00",
   "Energy": 0.73095
 },
 {
   "Day": "2018-02-06",
   "Time": "1:00:00",
   "Energy": 0.78137
 },
 {
   "Day": "2018-02-06",
   "Time": "2:00:00",
   "Energy": 0.73121
 },
 {
   "Day": "2018-02-06",
   "Time": "3:00:00",
   "Energy": 0.92797
 },
 {
   "Day": "2018-02-06",
   "Time": "4:00:00",
   "Energy": 0.7463
 },
 {
   "Day": "2018-02-06",
   "Time": "5:00:00",
   "Energy": 0.7606
 },
 {
   "Day": "2018-02-06",
   "Time": "6:00:00",
   "Energy": 0.9264
 },
 {
   "Day": "2018-02-06",
   "Time": "7:00:00",
   "Energy": 1.17504
 },
 {
   "Day": "2018-02-06",
   "Time": "8:00:00",
   "Energy": 0.98919
 },
 {
   "Day": "2018-02-06",
   "Time": "9:00:00",
   "Energy": 1.02497
 },
 {
   "Day": "2018-02-06",
   "Time": "10:00:00",
   "Energy": 1.14037
 },
 {
   "Day": "2018-02-06",
   "Time": "11:00:00",
   "Energy": 1.14146
 },
 {
   "Day": "2018-02-06",
   "Time": "12:00:00",
   "Energy": 0.8798
 },
 {
   "Day": "2018-02-06",
   "Time": "13:00:00",
   "Energy": 1.33805
 },
 {
   "Day": "2018-02-06",
   "Time": "14:00:00",
   "Energy": 4.12608
 },
 {
   "Day": "2018-02-06",
   "Time": "15:00:00",
   "Energy": 1.59918
 },
 {
   "Day": "2018-02-06",
   "Time": "16:00:00",
   "Energy": 0.97344
 },
 {
   "Day": "2018-02-06",
   "Time": "17:00:00",
   "Energy": 1.33272
 },
 {
   "Day": "2018-02-06",
   "Time": "18:00:00",
   "Energy": 1.68417
 },
 {
   "Day": "2018-02-06",
   "Time": "19:00:00",
   "Energy": 2.83569
 },
 {
   "Day": "2018-02-06",
   "Time": "20:00:00",
   "Energy": 1.41708
 },
 {
   "Day": "2018-02-06",
   "Time": "21:00:00",
   "Energy": 1.1962
 },
 {
   "Day": "2018-02-06",
   "Time": "22:00:00",
   "Energy": 1.24349
 },
 {
   "Day": "2018-02-06",
   "Time": "23:00:00",
   "Energy": 1.04037
 },
 {
   "Day": "2018-02-07",
   "Time": "0:00:00",
   "Energy": 0.96141
 },
 {
   "Day": "2018-02-07",
   "Time": "1:00:00",
   "Energy": 0.80447
 },
 {
   "Day": "2018-02-07",
   "Time": "2:00:00",
   "Energy": 0.85759
 },
 {
   "Day": "2018-02-07",
   "Time": "3:00:00",
   "Energy": 0.86092
 },
 {
   "Day": "2018-02-07",
   "Time": "4:00:00",
   "Energy": 0.77938
 },
 {
   "Day": "2018-02-07",
   "Time": "5:00:00",
   "Energy": 0.84119
 },
 {
   "Day": "2018-02-07",
   "Time": "6:00:00",
   "Energy": 0.9267
 },
 {
   "Day": "2018-02-07",
   "Time": "7:00:00",
   "Energy": 0.94786
 },
 {
   "Day": "2018-02-07",
   "Time": "8:00:00",
   "Energy": 0.94972
 },
 {
   "Day": "2018-02-07",
   "Time": "9:00:00",
   "Energy": 3.43623
 },
 {
   "Day": "2018-02-07",
   "Time": "10:00:00",
   "Energy": 2.98379
 },
 {
   "Day": "2018-02-07",
   "Time": "11:00:00",
   "Energy": 1.81706
 },
 {
   "Day": "2018-02-07",
   "Time": "12:00:00",
   "Energy": 0.85754
 },
 {
   "Day": "2018-02-07",
   "Time": "13:00:00",
   "Energy": 0.92644
 },
 {
   "Day": "2018-02-07",
   "Time": "14:00:00",
   "Energy": 1.58825
 },
 {
   "Day": "2018-02-07",
   "Time": "15:00:00",
   "Energy": 1.75149
 },
 {
   "Day": "2018-02-07",
   "Time": "16:00:00",
   "Energy": 1.05612
 },
 {
   "Day": "2018-02-07",
   "Time": "17:00:00",
   "Energy": 2.65287
 },
 {
   "Day": "2018-02-07",
   "Time": "18:00:00",
   "Energy": 1.88722
 },
 {
   "Day": "2018-02-07",
   "Time": "19:00:00",
   "Energy": 1.65227
 },
 {
   "Day": "2018-02-07",
   "Time": "20:00:00",
   "Energy": 1.53691
 },
 {
   "Day": "2018-02-07",
   "Time": "21:00:00",
   "Energy": 1.11682
 },
 {
   "Day": "2018-02-07",
   "Time": "22:00:00",
   "Energy": 1.14746
 },
 {
   "Day": "2018-02-07",
   "Time": "23:00:00",
   "Energy": 0.88874
 },
 {
   "Day": "2018-02-08",
   "Time": "0:00:00",
   "Energy": 0.79033
 },
 {
   "Day": "2018-02-08",
   "Time": "1:00:00",
   "Energy": 0.82353
 },
 {
   "Day": "2018-02-08",
   "Time": "2:00:00",
   "Energy": 0.75423
 },
 {
   "Day": "2018-02-08",
   "Time": "3:00:00",
   "Energy": 0.83025
 },
 {
   "Day": "2018-02-08",
   "Time": "4:00:00",
   "Energy": 0.74681
 },
 {
   "Day": "2018-02-08",
   "Time": "5:00:00",
   "Energy": 0.78607
 },
 {
   "Day": "2018-02-08",
   "Time": "6:00:00",
   "Energy": 0.80484
 },
 {
   "Day": "2018-02-08",
   "Time": "7:00:00",
   "Energy": 1.62119
 },
 {
   "Day": "2018-02-08",
   "Time": "8:00:00",
   "Energy": 1.06367
 },
 {
   "Day": "2018-02-08",
   "Time": "9:00:00",
   "Energy": 1.66891
 },
 {
   "Day": "2018-02-08",
   "Time": "10:00:00",
   "Energy": 1.85167
 },
 {
   "Day": "2018-02-08",
   "Time": "11:00:00",
   "Energy": 0.95448
 },
 {
   "Day": "2018-02-08",
   "Time": "12:00:00",
   "Energy": 0.88946
 },
 {
   "Day": "2018-02-08",
   "Time": "13:00:00",
   "Energy": 0.92652
 },
 {
   "Day": "2018-02-08",
   "Time": "14:00:00",
   "Energy": 0.99484
 },
 {
   "Day": "2018-02-08",
   "Time": "15:00:00",
   "Energy": 0.82337
 },
 {
   "Day": "2018-02-08",
   "Time": "16:00:00",
   "Energy": 1.0847
 },
 {
   "Day": "2018-02-08",
   "Time": "17:00:00",
   "Energy": 1.15008
 },
 {
   "Day": "2018-02-08",
   "Time": "18:00:00",
   "Energy": 2.38395
 },
 {
   "Day": "2018-02-08",
   "Time": "19:00:00",
   "Energy": 1.56766
 },
 {
   "Day": "2018-02-08",
   "Time": "20:00:00",
   "Energy": 1.13849
 },
 {
   "Day": "2018-02-08",
   "Time": "21:00:00",
   "Energy": 1.20726
 },
 {
   "Day": "2018-02-08",
   "Time": "22:00:00",
   "Energy": 1.21875
 },
 {
   "Day": "2018-02-08",
   "Time": "23:00:00",
   "Energy": 1.00239
 },
 {
   "Day": "2018-02-09",
   "Time": "0:00:00",
   "Energy": 0.89868
 },
 {
   "Day": "2018-02-09",
   "Time": "1:00:00",
   "Energy": 0.79417
 },
 {
   "Day": "2018-02-09",
   "Time": "2:00:00",
   "Energy": 0.8187
 },
 {
   "Day": "2018-02-09",
   "Time": "3:00:00",
   "Energy": 0.7582
 },
 {
   "Day": "2018-02-09",
   "Time": "4:00:00",
   "Energy": 0.82437
 },
 {
   "Day": "2018-02-09",
   "Time": "5:00:00",
   "Energy": 0.88788
 },
 {
   "Day": "2018-02-09",
   "Time": "6:00:00",
   "Energy": 1.05633
 },
 {
   "Day": "2018-02-09",
   "Time": "7:00:00",
   "Energy": 1.18816
 },
 {
   "Day": "2018-02-09",
   "Time": "8:00:00",
   "Energy": 1.01272
 },
 {
   "Day": "2018-02-09",
   "Time": "9:00:00",
   "Energy": 1.26137
 },
 {
   "Day": "2018-02-09",
   "Time": "10:00:00",
   "Energy": 1.09021
 },
 {
   "Day": "2018-02-09",
   "Time": "11:00:00",
   "Energy": 1.01505
 },
 {
   "Day": "2018-02-09",
   "Time": "12:00:00",
   "Energy": 0.868
 },
 {
   "Day": "2018-02-09",
   "Time": "13:00:00",
   "Energy": 1.45837
 },
 {
   "Day": "2018-02-09",
   "Time": "14:00:00",
   "Energy": 4.03962
 },
 {
   "Day": "2018-02-09",
   "Time": "15:00:00",
   "Energy": 1.65456
 },
 {
   "Day": "2018-02-09",
   "Time": "16:00:00",
   "Energy": 1.54057
 },
 {
   "Day": "2018-02-09",
   "Time": "17:00:00",
   "Energy": 2.20836
 },
 {
   "Day": "2018-02-09",
   "Time": "18:00:00",
   "Energy": 2.82671
 },
 {
   "Day": "2018-02-09",
   "Time": "19:00:00",
   "Energy": 1.91732
 },
 {
   "Day": "2018-02-09",
   "Time": "20:00:00",
   "Energy": 1.25389
 },
 {
   "Day": "2018-02-09",
   "Time": "21:00:00",
   "Energy": 1.57711
 },
 {
   "Day": "2018-02-09",
   "Time": "22:00:00",
   "Energy": 1.52818
 },
 {
   "Day": "2018-02-09",
   "Time": "23:00:00",
   "Energy": 1.01065
 },
 {
   "Day": "2018-02-10",
   "Time": "0:00:00",
   "Energy": 0.83143
 },
 {
   "Day": "2018-02-10",
   "Time": "1:00:00",
   "Energy": 0.81041
 },
 {
   "Day": "2018-02-10",
   "Time": "2:00:00",
   "Energy": 0.75715
 },
 {
   "Day": "2018-02-10",
   "Time": "3:00:00",
   "Energy": 0.95312
 },
 {
   "Day": "2018-02-10",
   "Time": "4:00:00",
   "Energy": 1.33889
 },
 {
   "Day": "2018-02-10",
   "Time": "5:00:00",
   "Energy": 1.00619
 },
 {
   "Day": "2018-02-10",
   "Time": "6:00:00",
   "Energy": 0.91961
 },
 {
   "Day": "2018-02-10",
   "Time": "7:00:00",
   "Energy": 0.83957
 },
 {
   "Day": "2018-02-10",
   "Time": "8:00:00",
   "Energy": 0.96819
 },
 {
   "Day": "2018-02-10",
   "Time": "9:00:00",
   "Energy": 0.91404
 },
 {
   "Day": "2018-02-10",
   "Time": "10:00:00",
   "Energy": 0.9877
 },
 {
   "Day": "2018-02-10",
   "Time": "11:00:00",
   "Energy": 1.00918
 },
 {
   "Day": "2018-02-10",
   "Time": "12:00:00",
   "Energy": 1.0725
 },
 {
   "Day": "2018-02-10",
   "Time": "13:00:00",
   "Energy": 1.01103
 },
 {
   "Day": "2018-02-10",
   "Time": "14:00:00",
   "Energy": 1.12051
 },
 {
   "Day": "2018-02-10",
   "Time": "15:00:00",
   "Energy": 0.9949
 },
 {
   "Day": "2018-02-10",
   "Time": "16:00:00",
   "Energy": 1.09978
 },
 {
   "Day": "2018-02-10",
   "Time": "17:00:00",
   "Energy": 1.0853
 },
 {
   "Day": "2018-02-10",
   "Time": "18:00:00",
   "Energy": 1.07643
 },
 {
   "Day": "2018-02-10",
   "Time": "19:00:00",
   "Energy": 1.12232
 },
 {
   "Day": "2018-02-10",
   "Time": "20:00:00",
   "Energy": 1.19269
 },
 {
   "Day": "2018-02-10",
   "Time": "21:00:00",
   "Energy": 1.13398
 },
 {
   "Day": "2018-02-10",
   "Time": "22:00:00",
   "Energy": 0.87305
 },
 {
   "Day": "2018-02-10",
   "Time": "23:00:00",
   "Energy": 0.77591
 },
 {
   "Day": "2018-02-11",
   "Time": "0:00:00",
   "Energy": 0.80202
 },
 {
   "Day": "2018-02-11",
   "Time": "1:00:00",
   "Energy": 0.76031
 },
 {
   "Day": "2018-02-11",
   "Time": "2:00:00",
   "Energy": 0.81112
 },
 {
   "Day": "2018-02-11",
   "Time": "3:00:00",
   "Energy": 0.77091
 },
 {
   "Day": "2018-02-11",
   "Time": "4:00:00",
   "Energy": 0.79923
 },
 {
   "Day": "2018-02-11",
   "Time": "5:00:00",
   "Energy": 0.75205
 },
 {
   "Day": "2018-02-11",
   "Time": "6:00:00",
   "Energy": 1.24896
 },
 {
   "Day": "2018-02-11",
   "Time": "7:00:00",
   "Energy": 5.41669
 },
 {
   "Day": "2018-02-11",
   "Time": "8:00:00",
   "Energy": 3.86432
 },
 {
   "Day": "2018-02-11",
   "Time": "9:00:00",
   "Energy": 2.24207
 },
 {
   "Day": "2018-02-11",
   "Time": "10:00:00",
   "Energy": 1.02117
 },
 {
   "Day": "2018-02-11",
   "Time": "11:00:00",
   "Energy": 0.86182
 },
 {
   "Day": "2018-02-11",
   "Time": "12:00:00",
   "Energy": 0.87986
 },
 {
   "Day": "2018-02-11",
   "Time": "13:00:00",
   "Energy": 0.97474
 },
 {
   "Day": "2018-02-11",
   "Time": "14:00:00",
   "Energy": 0.89322
 },
 {
   "Day": "2018-02-11",
   "Time": "15:00:00",
   "Energy": 0.84764
 },
 {
   "Day": "2018-02-11",
   "Time": "16:00:00",
   "Energy": 0.79291
 },
 {
   "Day": "2018-02-11",
   "Time": "17:00:00",
   "Energy": 0.90331
 },
 {
   "Day": "2018-02-11",
   "Time": "18:00:00",
   "Energy": 1.99813
 },
 {
   "Day": "2018-02-11",
   "Time": "19:00:00",
   "Energy": 1.1451
 },
 {
   "Day": "2018-02-11",
   "Time": "20:00:00",
   "Energy": 2.45643
 },
 {
   "Day": "2018-02-11",
   "Time": "21:00:00",
   "Energy": 4.07461
 },
 {
   "Day": "2018-02-11",
   "Time": "22:00:00",
   "Energy": 2.10725
 },
 {
   "Day": "2018-02-11",
   "Time": "23:00:00",
   "Energy": 0.70986
 },
 {
   "Day": "2018-02-12",
   "Time": "0:00:00",
   "Energy": 0.83572
 },
 {
   "Day": "2018-02-12",
   "Time": "1:00:00",
   "Energy": 0.93985
 },
 {
   "Day": "2018-02-12",
   "Time": "2:00:00",
   "Energy": 0.71867
 },
 {
   "Day": "2018-02-12",
   "Time": "3:00:00",
   "Energy": 0.70929
 },
 {
   "Day": "2018-02-12",
   "Time": "4:00:00",
   "Energy": 0.70206
 },
 {
   "Day": "2018-02-12",
   "Time": "5:00:00",
   "Energy": 1.08036
 },
 {
   "Day": "2018-02-12",
   "Time": "6:00:00",
   "Energy": 5.03866
 },
 {
   "Day": "2018-02-12",
   "Time": "7:00:00",
   "Energy": 5.32796
 },
 {
   "Day": "2018-02-12",
   "Time": "8:00:00",
   "Energy": 5.77825
 },
 {
   "Day": "2018-02-12",
   "Time": "9:00:00",
   "Energy": 2.50687
 },
 {
   "Day": "2018-02-12",
   "Time": "10:00:00",
   "Energy": 0.82962
 },
 {
   "Day": "2018-02-12",
   "Time": "11:00:00",
   "Energy": 1.0137
 },
 {
   "Day": "2018-02-12",
   "Time": "12:00:00",
   "Energy": 0.80734
 },
 {
   "Day": "2018-02-12",
   "Time": "13:00:00",
   "Energy": 0.83788
 },
 {
   "Day": "2018-02-12",
   "Time": "14:00:00",
   "Energy": 0.77691
 },
 {
   "Day": "2018-02-12",
   "Time": "15:00:00",
   "Energy": 0.74768
 },
 {
   "Day": "2018-02-12",
   "Time": "16:00:00",
   "Energy": 0.67293
 },
 {
   "Day": "2018-02-12",
   "Time": "17:00:00",
   "Energy": 0.71822
 },
 {
   "Day": "2018-02-12",
   "Time": "18:00:00",
   "Energy": 0.88515
 },
 {
   "Day": "2018-02-12",
   "Time": "19:00:00",
   "Energy": 1.29212
 },
 {
   "Day": "2018-02-12",
   "Time": "20:00:00",
   "Energy": 4.7513
 },
 {
   "Day": "2018-02-12",
   "Time": "21:00:00",
   "Energy": 1.4035
 },
 {
   "Day": "2018-02-12",
   "Time": "22:00:00",
   "Energy": 0.85236
 },
 {
   "Day": "2018-02-12",
   "Time": "23:00:00",
   "Energy": 0.89758
 },
 {
   "Day": "2018-02-13",
   "Time": "0:00:00",
   "Energy": 0.81208
 },
 {
   "Day": "2018-02-13",
   "Time": "1:00:00",
   "Energy": 0.7512
 },
 {
   "Day": "2018-02-13",
   "Time": "2:00:00",
   "Energy": 0.79082
 },
 {
   "Day": "2018-02-13",
   "Time": "3:00:00",
   "Energy": 2.18999
 },
 {
   "Day": "2018-02-13",
   "Time": "4:00:00",
   "Energy": 4.18116
 },
 {
   "Day": "2018-02-13",
   "Time": "5:00:00",
   "Energy": 0.96068
 },
 {
   "Day": "2018-02-13",
   "Time": "6:00:00",
   "Energy": 4.96209
 },
 {
   "Day": "2018-02-13",
   "Time": "7:00:00",
   "Energy": 5.53308
 },
 {
   "Day": "2018-02-13",
   "Time": "8:00:00",
   "Energy": 6.15392
 },
 {
   "Day": "2018-02-13",
   "Time": "9:00:00",
   "Energy": 3.27069
 },
 {
   "Day": "2018-02-13",
   "Time": "10:00:00",
   "Energy": 0.93867
 },
 {
   "Day": "2018-02-13",
   "Time": "11:00:00",
   "Energy": 0.82083
 },
 {
   "Day": "2018-02-13",
   "Time": "12:00:00",
   "Energy": 0.78453
 },
 {
   "Day": "2018-02-13",
   "Time": "13:00:00",
   "Energy": 0.84412
 },
 {
   "Day": "2018-02-13",
   "Time": "14:00:00",
   "Energy": 0.78965
 },
 {
   "Day": "2018-02-13",
   "Time": "15:00:00",
   "Energy": 0.77084
 },
 {
   "Day": "2018-02-13",
   "Time": "16:00:00",
   "Energy": 0.71637
 },
 {
   "Day": "2018-02-13",
   "Time": "17:00:00",
   "Energy": 0.7264
 },
 {
   "Day": "2018-02-13",
   "Time": "18:00:00",
   "Energy": 0.7293
 },
 {
   "Day": "2018-02-13",
   "Time": "19:00:00",
   "Energy": 1.14398
 },
 {
   "Day": "2018-02-13",
   "Time": "20:00:00",
   "Energy": 1.14727
 },
 {
   "Day": "2018-02-13",
   "Time": "21:00:00",
   "Energy": 1.54526
 },
 {
   "Day": "2018-02-13",
   "Time": "22:00:00",
   "Energy": 4.70851
 },
 {
   "Day": "2018-02-13",
   "Time": "23:00:00",
   "Energy": 0.72702
 },
 {
   "Day": "2018-02-14",
   "Time": "0:00:00",
   "Energy": 0.7526
 },
 {
   "Day": "2018-02-14",
   "Time": "1:00:00",
   "Energy": 0.73468
 },
 {
   "Day": "2018-02-14",
   "Time": "2:00:00",
   "Energy": 0.7248
 },
 {
   "Day": "2018-02-14",
   "Time": "3:00:00",
   "Energy": 0.72174
 },
 {
   "Day": "2018-02-14",
   "Time": "4:00:00",
   "Energy": 0.7223
 },
 {
   "Day": "2018-02-14",
   "Time": "5:00:00",
   "Energy": 0.71184
 },
 {
   "Day": "2018-02-14",
   "Time": "6:00:00",
   "Energy": 4.70489
 },
 {
   "Day": "2018-02-14",
   "Time": "7:00:00",
   "Energy": 5.32397
 },
 {
   "Day": "2018-02-14",
   "Time": "8:00:00",
   "Energy": 4.79314
 },
 {
   "Day": "2018-02-14",
   "Time": "9:00:00",
   "Energy": 0.91659
 },
 {
   "Day": "2018-02-14",
   "Time": "10:00:00",
   "Energy": 0.93605
 },
 {
   "Day": "2018-02-14",
   "Time": "11:00:00",
   "Energy": 0.88324
 },
 {
   "Day": "2018-02-14",
   "Time": "12:00:00",
   "Energy": 0.75281
 },
 {
   "Day": "2018-02-14",
   "Time": "13:00:00",
   "Energy": 0.89548
 },
 {
   "Day": "2018-02-14",
   "Time": "14:00:00",
   "Energy": 0.94295
 },
 {
   "Day": "2018-02-14",
   "Time": "15:00:00",
   "Energy": 0.84782
 },
 {
   "Day": "2018-02-14",
   "Time": "16:00:00",
   "Energy": 0.9805
 },
 {
   "Day": "2018-02-14",
   "Time": "17:00:00",
   "Energy": 0.84785
 },
 {
   "Day": "2018-02-14",
   "Time": "18:00:00",
   "Energy": 1.07281
 },
 {
   "Day": "2018-02-14",
   "Time": "19:00:00",
   "Energy": 2.04562
 },
 {
   "Day": "2018-02-14",
   "Time": "20:00:00",
   "Energy": 1.00204
 },
 {
   "Day": "2018-02-14",
   "Time": "21:00:00",
   "Energy": 5.04772
 },
 {
   "Day": "2018-02-14",
   "Time": "22:00:00",
   "Energy": 1.26739
 },
 {
   "Day": "2018-02-14",
   "Time": "23:00:00",
   "Energy": 0.77881
 },
 {
   "Day": "2018-02-15",
   "Time": "0:00:00",
   "Energy": 0.75973
 },
 {
   "Day": "2018-02-15",
   "Time": "1:00:00",
   "Energy": 0.82132
 },
 {
   "Day": "2018-02-15",
   "Time": "2:00:00",
   "Energy": 0.79399
 },
 {
   "Day": "2018-02-15",
   "Time": "3:00:00",
   "Energy": 0.71837
 },
 {
   "Day": "2018-02-15",
   "Time": "4:00:00",
   "Energy": 1.73074
 },
 {
   "Day": "2018-02-15",
   "Time": "5:00:00",
   "Energy": 4.70068
 },
 {
   "Day": "2018-02-15",
   "Time": "6:00:00",
   "Energy": 2.65582
 },
 {
   "Day": "2018-02-15",
   "Time": "7:00:00",
   "Energy": 5.42334
 },
 {
   "Day": "2018-02-15",
   "Time": "8:00:00",
   "Energy": 4.94119
 },
 {
   "Day": "2018-02-15",
   "Time": "9:00:00",
   "Energy": 4.27906
 },
 {
   "Day": "2018-02-15",
   "Time": "10:00:00",
   "Energy": 0.92634
 },
 {
   "Day": "2018-02-15",
   "Time": "11:00:00",
   "Energy": 0.91147
 },
 {
   "Day": "2018-02-15",
   "Time": "12:00:00",
   "Energy": 0.94193
 },
 {
   "Day": "2018-02-15",
   "Time": "13:00:00",
   "Energy": 1.07533
 },
 {
   "Day": "2018-02-15",
   "Time": "14:00:00",
   "Energy": 0.9434
 },
 {
   "Day": "2018-02-15",
   "Time": "15:00:00",
   "Energy": 0.92778
 },
 {
   "Day": "2018-02-15",
   "Time": "16:00:00",
   "Energy": 0.82915
 },
 {
   "Day": "2018-02-15",
   "Time": "17:00:00",
   "Energy": 0.79394
 },
 {
   "Day": "2018-02-15",
   "Time": "18:00:00",
   "Energy": 0.8878
 },
 {
   "Day": "2018-02-15",
   "Time": "19:00:00",
   "Energy": 1.15136
 },
 {
   "Day": "2018-02-15",
   "Time": "20:00:00",
   "Energy": 1.04828
 },
 {
   "Day": "2018-02-15",
   "Time": "21:00:00",
   "Energy": 4.89386
 },
 {
   "Day": "2018-02-15",
   "Time": "22:00:00",
   "Energy": 0.94621
 },
 {
   "Day": "2018-02-15",
   "Time": "23:00:00",
   "Energy": 0.79548
 },
 {
   "Day": "2018-02-16",
   "Time": "0:00:00",
   "Energy": 0.86243
 },
 {
   "Day": "2018-02-16",
   "Time": "1:00:00",
   "Energy": 0.73221
 },
 {
   "Day": "2018-02-16",
   "Time": "2:00:00",
   "Energy": 0.71338
 },
 {
   "Day": "2018-02-16",
   "Time": "3:00:00",
   "Energy": 0.71973
 },
 {
   "Day": "2018-02-16",
   "Time": "4:00:00",
   "Energy": 0.73256
 },
 {
   "Day": "2018-02-16",
   "Time": "5:00:00",
   "Energy": 4.61971
 },
 {
   "Day": "2018-02-16",
   "Time": "6:00:00",
   "Energy": 0.68508
 },
 {
   "Day": "2018-02-16",
   "Time": "7:00:00",
   "Energy": 2.78736
 },
 {
   "Day": "2018-02-16",
   "Time": "8:00:00",
   "Energy": 5.41984
 },
 {
   "Day": "2018-02-16",
   "Time": "9:00:00",
   "Energy": 4.74563
 },
 {
   "Day": "2018-02-16",
   "Time": "10:00:00",
   "Energy": 0.97064
 },
 {
   "Day": "2018-02-16",
   "Time": "11:00:00",
   "Energy": 0.96299
 },
 {
   "Day": "2018-02-16",
   "Time": "12:00:00",
   "Energy": 0.75305
 },
 {
   "Day": "2018-02-16",
   "Time": "13:00:00",
   "Energy": 0.76626
 },
 {
   "Day": "2018-02-16",
   "Time": "14:00:00",
   "Energy": 0.77559
 },
 {
   "Day": "2018-02-16",
   "Time": "15:00:00",
   "Energy": 0.65091
 },
 {
   "Day": "2018-02-16",
   "Time": "16:00:00",
   "Energy": 0.68203
 },
 {
   "Day": "2018-02-16",
   "Time": "17:00:00",
   "Energy": 0.66273
 },
 {
   "Day": "2018-02-16",
   "Time": "18:00:00",
   "Energy": 0.64186
 },
 {
   "Day": "2018-02-16",
   "Time": "19:00:00",
   "Energy": 0.70789
 },
 {
   "Day": "2018-02-16",
   "Time": "20:00:00",
   "Energy": 1.12326
 },
 {
   "Day": "2018-02-16",
   "Time": "21:00:00",
   "Energy": 0.99163
 },
 {
   "Day": "2018-02-16",
   "Time": "22:00:00",
   "Energy": 0.91898
 },
 {
   "Day": "2018-02-16",
   "Time": "23:00:00",
   "Energy": 0.82399
 },
 {
   "Day": "2018-02-17",
   "Time": "0:00:00",
   "Energy": 0.75097
 },
 {
   "Day": "2018-02-17",
   "Time": "1:00:00",
   "Energy": 0.61432
 },
 {
   "Day": "2018-02-17",
   "Time": "2:00:00",
   "Energy": 0.75053
 },
 {
   "Day": "2018-02-17",
   "Time": "3:00:00",
   "Energy": 0.73103
 },
 {
   "Day": "2018-02-17",
   "Time": "4:00:00",
   "Energy": 0.69204
 },
 {
   "Day": "2018-02-17",
   "Time": "5:00:00",
   "Energy": 0.63479
 },
 {
   "Day": "2018-02-17",
   "Time": "6:00:00",
   "Energy": 1.54655
 },
 {
   "Day": "2018-02-17",
   "Time": "7:00:00",
   "Energy": 5.272
 },
 {
   "Day": "2018-02-17",
   "Time": "8:00:00",
   "Energy": 5.46783
 },
 {
   "Day": "2018-02-17",
   "Time": "9:00:00",
   "Energy": 0.85132
 },
 {
   "Day": "2018-02-17",
   "Time": "10:00:00",
   "Energy": 0.93697
 },
 {
   "Day": "2018-02-17",
   "Time": "11:00:00",
   "Energy": 0.88139
 },
 {
   "Day": "2018-02-17",
   "Time": "12:00:00",
   "Energy": 0.88524
 },
 {
   "Day": "2018-02-17",
   "Time": "13:00:00",
   "Energy": 0.95766
 },
 {
   "Day": "2018-02-17",
   "Time": "14:00:00",
   "Energy": 1.30822
 },
 {
   "Day": "2018-02-17",
   "Time": "15:00:00",
   "Energy": 1.59391
 },
 {
   "Day": "2018-02-17",
   "Time": "16:00:00",
   "Energy": 0.90628
 },
 {
   "Day": "2018-02-17",
   "Time": "17:00:00",
   "Energy": 0.8006
 },
 {
   "Day": "2018-02-17",
   "Time": "18:00:00",
   "Energy": 1.19351
 },
 {
   "Day": "2018-02-17",
   "Time": "19:00:00",
   "Energy": 1.3647
 },
 {
   "Day": "2018-02-17",
   "Time": "20:00:00",
   "Energy": 0.95907
 },
 {
   "Day": "2018-02-17",
   "Time": "21:00:00",
   "Energy": 0.90716
 },
 {
   "Day": "2018-02-17",
   "Time": "22:00:00",
   "Energy": 1.08786
 },
 {
   "Day": "2018-02-17",
   "Time": "23:00:00",
   "Energy": 0.87761
 },
 {
   "Day": "2018-02-18",
   "Time": "0:00:00",
   "Energy": 0.80105
 },
 {
   "Day": "2018-02-18",
   "Time": "1:00:00",
   "Energy": 0.72607
 },
 {
   "Day": "2018-02-18",
   "Time": "2:00:00",
   "Energy": 0.74417
 },
 {
   "Day": "2018-02-18",
   "Time": "3:00:00",
   "Energy": 0.77896
 },
 {
   "Day": "2018-02-18",
   "Time": "4:00:00",
   "Energy": 0.73813
 },
 {
   "Day": "2018-02-18",
   "Time": "5:00:00",
   "Energy": 1.09859
 },
 {
   "Day": "2018-02-18",
   "Time": "6:00:00",
   "Energy": 3.13887
 },
 {
   "Day": "2018-02-18",
   "Time": "7:00:00",
   "Energy": 5.39307
 },
 {
   "Day": "2018-02-18",
   "Time": "8:00:00",
   "Energy": 3.42508
 },
 {
   "Day": "2018-02-18",
   "Time": "9:00:00",
   "Energy": 2.12606
 },
 {
   "Day": "2018-02-18",
   "Time": "10:00:00",
   "Energy": 0.73827
 },
 {
   "Day": "2018-02-18",
   "Time": "11:00:00",
   "Energy": 4.52049
 },
 {
   "Day": "2018-02-18",
   "Time": "12:00:00",
   "Energy": 0.91435
 },
 {
   "Day": "2018-02-18",
   "Time": "13:00:00",
   "Energy": 1.16161
 },
 {
   "Day": "2018-02-18",
   "Time": "14:00:00",
   "Energy": 0.99243
 },
 {
   "Day": "2018-02-18",
   "Time": "15:00:00",
   "Energy": 1.52699
 },
 {
   "Day": "2018-02-18",
   "Time": "16:00:00",
   "Energy": 2.88138
 },
 {
   "Day": "2018-02-18",
   "Time": "17:00:00",
   "Energy": 6.86436
 },
 {
   "Day": "2018-02-18",
   "Time": "18:00:00",
   "Energy": 4.11946
 },
 {
   "Day": "2018-02-18",
   "Time": "19:00:00",
   "Energy": 1.39531
 },
 {
   "Day": "2018-02-18",
   "Time": "20:00:00",
   "Energy": 1.32762
 },
 {
   "Day": "2018-02-18",
   "Time": "21:00:00",
   "Energy": 3.65162
 },
 {
   "Day": "2018-02-18",
   "Time": "22:00:00",
   "Energy": 5.23269
 },
 {
   "Day": "2018-02-18",
   "Time": "23:00:00",
   "Energy": 1.57396
 },
 {
   "Day": "2018-02-19",
   "Time": "0:00:00",
   "Energy": 0.72311
 },
 {
   "Day": "2018-02-19",
   "Time": "1:00:00",
   "Energy": 0.67692
 },
 {
   "Day": "2018-02-19",
   "Time": "2:00:00",
   "Energy": 0.67222
 },
 {
   "Day": "2018-02-19",
   "Time": "3:00:00",
   "Energy": 0.80028
 },
 {
   "Day": "2018-02-19",
   "Time": "4:00:00",
   "Energy": 2.10519
 },
 {
   "Day": "2018-02-19",
   "Time": "5:00:00",
   "Energy": 4.74312
 },
 {
   "Day": "2018-02-19",
   "Time": "6:00:00",
   "Energy": 6.39933
 },
 {
   "Day": "2018-02-19",
   "Time": "7:00:00",
   "Energy": 5.25404
 },
 {
   "Day": "2018-02-19",
   "Time": "8:00:00",
   "Energy": 5.92035
 },
 {
   "Day": "2018-02-19",
   "Time": "9:00:00",
   "Energy": 5.06791
 },
 {
   "Day": "2018-02-19",
   "Time": "10:00:00",
   "Energy": 4.43647
 },
 {
   "Day": "2018-02-19",
   "Time": "11:00:00",
   "Energy": 0.86935
 },
 {
   "Day": "2018-02-19",
   "Time": "12:00:00",
   "Energy": 0.84537
 },
 {
   "Day": "2018-02-19",
   "Time": "13:00:00",
   "Energy": 0.83678
 },
 {
   "Day": "2018-02-19",
   "Time": "14:00:00",
   "Energy": 0.74391
 },
 {
   "Day": "2018-02-19",
   "Time": "15:00:00",
   "Energy": 0.98384
 },
 {
   "Day": "2018-02-19",
   "Time": "16:00:00",
   "Energy": 4.50736
 },
 {
   "Day": "2018-02-19",
   "Time": "17:00:00",
   "Energy": 6.81749
 },
 {
   "Day": "2018-02-19",
   "Time": "18:00:00",
   "Energy": 3.80223
 },
 {
   "Day": "2018-02-19",
   "Time": "19:00:00",
   "Energy": 3.09477
 },
 {
   "Day": "2018-02-19",
   "Time": "20:00:00",
   "Energy": 4.96191
 },
 {
   "Day": "2018-02-19",
   "Time": "21:00:00",
   "Energy": 4.87704
 },
 {
   "Day": "2018-02-19",
   "Time": "22:00:00",
   "Energy": 1.50808
 },
 {
   "Day": "2018-02-19",
   "Time": "23:00:00",
   "Energy": 0.78406
 }
];


    
    
var margin = {
			top: 50,
			right: 50,
			bottom: 50,
			left: 50
		};
    var width = 750 - margin.left - margin.right;
    var height = width;

    

var dataDisplayed = data;
var datasetDisplayed = data;
var radial_labels = [];

getRadialLabels(dataDisplayed);
drawSlider(dataDisplayed);

var segment_labels = ["Midnight", "1am", "2am", "3am", "4am", "5am", "6am", "7am", "8am", "9am", "10am",
                      "11am", "Midday", "1pm", "2pm", "3pm", "4pm", "5pm", "6pm", "7pm", "8pm", "9pm", "10pm", "11pm"];
var numSegments = segment_labels.length;// label length is 24 as 24 hours 
var range_blue = ["#fee0d2", "#fc9272", "#de2d26"]; //color for data
var index_one = 0;

//draw first chart
var chart = circularHeat()
        .domain([0, 2, 4, 6])
        .range(range_blue)
        .radialLabels(radial_labels)
        .segmentLabels(segment_labels)
        ._index(index_one);

chart.accessor(function (d) {
    return d.Energy;
});

    var svg = d3.select("acontent").append("svg").attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.select("acontent")
    .datum(dataDisplayed)
    .call(chart);

//hover effect params
var innerRadius = chart.innerRadius();
chart.numSegments();
var segmentHeight = chart.segmentHeight();

// call mouseover event
chart.on("customHover", mouseover(svg, index_one, innerRadius, numSegments, segmentHeight, dataDisplayed));


// legend
var linearV = d3.scale.linear()
        .domain([0, 2, 4, 6])
        .range(range_blue); // color for range



svg.append("g")
    .attr("class", "legendV")
    .attr("transform", "translate(10,30)");

var legendV = d3.legend.color()
        .shapeWidth(30)
        .cells(13)
     // .labelFormat(d3.format('.3f'))
        .scale(linearV)
        .title("in KWh");
    
svg.select(".legendV")
    .call(legendV);


var tooltip = d3.select("body")
        .append("div")
        .classed("radial-tooltip", true)
        .style("position", "absolute")
        .style("z-index", "10")
        .style("visibility", "hidden");

// Formats the HTML for tooltip based on the data.
var getTooltipHTML = function (d) {
    var html = '<p>';
    var Day = d.Day;
    var Time = d.Time;
    var Energy  = d.Energy;

    if (Day    !== null) {
        html += "Day: " + Day     + '<br/>';
    }
    if (Time   !== null) {
        html += "Time: " +  Time     + '<br/>';
    }
    if (Energy !== null) {
        html += "Energy: " +  Energy    + '<br/>';
    }
    
    html += '</p>';
    return html;
};

//functions

function swapDataset(passedData, radiallabels) {
    chart.radialLabels(radiallabels)
         .domain([0, 2, 4, 6])
         .range(range_blue);
	d3.select("acontent")
        .datum(passedData)
        .call(chart);
    drawSlider(passedData);
}


//update radial labels based on data
function getRadialLabels(passedData) {	
	var groupedData = _.groupBy(passedData, 'Day');
	for (var k in groupedData) radial_labels.push(k);
}

//update viz
function updateChart(passedData,radiallabels){
	chart.radialLabels(radiallabels)
         .domain([0,2,4,6])
         .range(range_blue);
	d3.select("acontent")
      .datum(passedData)
      .call(chart);
}

function mouseover(svg,index,innerRadius,numSegments,segmentHeight,passedData){
 svg.selectAll("path.segment"+index)
    .on("mouseover", function(d, i) {
        var targetIndex = Math.floor(i / numSegments); //the layer you are hovering
        var zoomSize = 20; //inner 5px and outer 5px
		var layerCnt = passedData.length / numSegments; //layer count, number of layers
        if(data.length < 400){
            d3.selectAll("path.segment"+index) //.arc indicates segment
                .transition()
                .duration(200)
                .attr("d",d3.svg.arc()
                      .innerRadius(ir)
                      .outerRadius(or)
                      .startAngle(sa)
                      .endAngle(ea));
        }
        else{
            d3.selectAll("path.segment"+index)
                .transition()
                .duration(0) //transtion effect
                .attr("d", d3.svg.arc() //set d again
                      .innerRadius(ir)
                      .outerRadius(or)
                      .startAngle(sa)
                      .endAngle(ea));              
        }
        function getRadius(floor) {
            if (floor === 0) { //inner radius doesn't change
                return innerRadius;
            }
            if (floor === layerCnt) { //outer radius doesn't change
                return innerRadius + layerCnt * segmentHeight;
            }
            if (floor <= targetIndex) { //it's math
                return innerRadius + floor * segmentHeight - zoomSize * (floor / targetIndex);
			} 
            else { //math again
				return innerRadius + floor * segmentHeight + zoomSize * ((layerCnt - floor) / (layerCnt - targetIndex));
			}
		}
		function ir(d, i) {
			return getRadius(Math.floor(i / numSegments));
		}
		function or(d, i) {
			return getRadius(Math.floor(i / numSegments) + 1);
		}
        var tooltipHTML = getTooltipHTML(d);
        tooltip.html(tooltipHTML);
        return tooltip.style("visibility", "visible");
        })
        
        .on("mousemove", function(d, i) {
            return tooltip
                .style("top", (d3.event.pageY-10)+"px")
                .style("left",(d3.event.pageX+10)+"px");
        })

        .on("mouseout", function(){
            return tooltip.style("visibility", "hidden");
                        
            var targetIndex = Math.floor(i / numSegments);
			var zoomSize = 5;
			var layerCnt = passedData.length / numSegments;
			d3.selectAll("path.segment"+index)
                .transition()
                .duration(0)
                .attr("d", d3.svg.arc()
                      .innerRadius(ir)
                      .outerRadius(or)
                      .startAngle(sa)
                      .endAngle(ea))
			function getRadius(floor) {
                return innerRadius + floor * segmentHeight;
			}
			function ir(d, i) {
				return getRadius(Math.floor(i / numSegments));
			}
			function or(d, i) {
				return getRadius(Math.floor(i / numSegments) + 1);
			}

        });
}

//get start and end date dynamically for slider
function getDateRange(dataPassed){
	//called by slider start & end dates
	//get first object in dataPassed array, and get the date
	firstObj=dataPassed.filter(function(d,i){
		return i==0
	});
	//get last object in dataPassed array, and get the date
	lastObj =  dataPassed.filter(function(d,i){
		return i==dataPassed.length-1
	});
	datefrom = firstObj[0].Day;
	dateto=lastObj[0].Day;
	datejson = {'start':datefrom,'end':dateto};
	return datejson;
}


function drawSlider(passedData){
	//called by swapDataset
	//calls getDateRange
	$("#slider-range").empty();
	
	var dt_from =  getDateRange(passedData)['start'];
	var dt_to = getDateRange(passedData)['end'];
	
	$('#slider-time').html(dt_from);
	$('#slider-time2').html(dt_to);
	var min_val = Date.parse(dt_from)/1000;
	var max_val = Date.parse(dt_to)/1000;
	
	function zeroPad(num, places) {
        var zero = places - num.toString().length + 1;
        return Array(+(zero > 0 && zero)).join("0") + num;
	}
	
	function formatDT(__dt) {
        var year = __dt.getFullYear();
        var month = zeroPad(__dt.getMonth()+1, 2);
        var date = zeroPad(__dt.getDate(), 2);
        return year + '-' + month + '-' + date ;
    };
    
    $("#slider-range").slider({
        range: true,
        min: min_val,
        max: max_val,
        step: 10,
        values: [min_val, max_val],
        slide: function (e, ui) {
            var dt_cur_from = new Date(ui.values[0]*1000);
            $('#slider-time').html(formatDT(dt_cur_from));
            var dt_cur_to = new Date(ui.values[1]*1000);           
            $('#slider-time2').html(formatDT(dt_cur_to));
        },
        stop: function(e, ui) { 
            var html = $('#slider-time').html();
            var html2 = $('#slider-time2').html();
            filterData(html,html2) 
        }
    });
}

var filtered = [];

function filterData(start,end){
	//called by slider drag stop event
	//calls updateChart
	//console.log(data);
	filtered = datasetDisplayed.filter(function(d){ return d.Day >=  start && d.Day <= end; }) //why data and not dataDisplayed?
	//console.log(filtered);
	radial_labels = [];
	getRadialLabels(filtered);
	updateChart(filtered,radial_labels);
	dataDisplayed = filtered;
	segmentHeight = (500 - 2 * innerRadius) / (2 * radial_labels.length);// should make this dynamic
    index=0;
    chart.on("customHover", mouseover(svg,index,innerRadius,numSegments,segmentHeight,dataDisplayed));
}







function circularHeat() {
	 var margin = {
			top: 50,
			right: 50,
			bottom: 50,
			left: 100
		};
    var width = 750 - margin.left - margin.right;
    var height = width;
    var format = d3.time.format("%Y-%m-%d");
	
	var accessor = function(d) {return d.Energy;};
    var radialLabels = segmentLabels = [];
    var numSegments = 24;
    var innerRadius = 80; 
	// the length of the radius of the donut chart is: (width-innerRadius*2) / 2
	// the length of each segment is: the radius of the donut chart / the number of layers
	
	var domain;
	var range;
	
	var _index = 0;
	
	var dispatch = d3.dispatch("customHover");


    function chart(selection) {
        selection.each(function (data) {
        	
        	//console.log('radialLabels.length');
        	//console.log(radialLabels.length);
        	
        	segmentHeight = (width - margin.top - margin.bottom - 2 * innerRadius) / (2 * radialLabels.length);
        
            offset = innerRadius + Math.ceil(data.length / numSegments) * segmentHeight;
            
            
            
            var color = d3.scale.linear().domain(domain).range(range);
        	
        	// Initialize the SVG Element
            var svg = d3.select(this)
                .selectAll("svg")
                .data([data]);
            
            // Set the SVG size
            svg.enter().append("svg")
                .classed("chart", true)
                .attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom);

        
        	if(svg.select('g.circular-heat')[0][0] == null){
        		var g = svg.append("g")
                	.classed("circular-heat", true)
                	.attr("transform", "translate(" + parseInt(margin.left + offset) + "," + parseInt(margin.top + offset) + ")");
            }
            
        
            var id = d3.selectAll(".circular-heat")[0].length-1;
            
            svg.select('g.circular-heat').attr('id','chart'+_index);
            
            //console.log(d3.selectAll(".circular-heat")[0]);
            //console.log(d3.select(".circular-heat")[0]);
            
            //console.log('id');
            //console.log(id);
            // console.log(_index);
            
            var segments = svg.select('g.circular-heat').selectAll("path").data(data)
            .attr("d", d3.svg.arc().innerRadius(ir).outerRadius(or).startAngle(sa).endAngle(ea))
            .attr("fill", function (d) {return color(accessor(d));});
             
             //console.log('segmentHeight');
             //console.log(segmentHeight);   
                
                segments
					.enter().append("path")
					.attr("id", function (d) {
						var time = d.Time;
						var timeCleaned = time.split(":").join("-");
						return "segment-" + d.Day + "-" + timeCleaned+"-"+id;
					})
					.attr("class", function (d) {
						return "segment-" + d.Day + " segment"+_index
					})
					.attr("d", d3.svg.arc().innerRadius(ir).outerRadius(or).startAngle(sa).endAngle(ea))
					// this part is not called when data is updated if the update data is shorter than the current one
					
					.attr("stroke", function (d) {
						return '#252525';
					})
					.attr("stroke-width",0.5)
					.attr("fill", function (d) {
						return color(accessor(d));
					})
					.on("mouseover", dispatch.customHover);
					
                
                segments.exit().transition().style({opacity: 0}).remove();

            //Segment labels
            var segmentLabelOffset = 5;
            var r = innerRadius + Math.ceil(data.length / numSegments) * segmentHeight + segmentLabelOffset;
            if(svg.select('g.labels')[0][0] == null){
        		var labels = svg.append("g")
                .classed("labels", true)
                .attr("transform", "translate(" + parseInt(margin.left + offset) + "," + parseInt(margin.top + offset) + ")");
            }
            
            svg.select('g.labels').append("def")
                .append("path")
                .attr("id", "segment-label-path-" + _index)
                .attr("d", "m0 -" + r + " a" + r + " " + r + " 0 1 1 -1 0");

            svg.select('g.labels').selectAll("text")
                .data(segmentLabels).enter()
                .append("text")
                .append("textPath")
                .attr("xlink:href", "#segment-label-path-" + _index)
                .style("font-size", "12px")
                .attr("startOffset", function (d, i) {
                    return i * 100 / numSegments + 1.5 + "%";
                })
                .text(function (d) {
                    return d;
                });
        });

    }

    /* Arc functions */
    getRadius = function (floor) {
    	// console.log('innerRadius + floor * segmentHeight;');
//     	console.log(innerRadius + floor * segmentHeight);
        return innerRadius + floor * segmentHeight;
    }

    ir = function (d, i) {
        return getRadius(Math.floor(i / numSegments));
    }

    or = function (d, i) {
        return getRadius(Math.floor(i / numSegments) + 1);
    }


    sa = function (d, i) {
        return (i * 2 * Math.PI) / numSegments;
    }
    ea = function (d, i) {
        return ((i + 1) * 2 * Math.PI) / numSegments;
    }

    /* Configuration getters/setters */
    chart.margin = function (_) {
        if (!arguments.length) return margin;
        margin = _;
        return chart;
    };
    
    chart.width = function (_) {
        if (!arguments.length) return width;
        margin = _;
        return chart;
    };

    chart.innerRadius = function (_) {
        if (!arguments.length) return innerRadius;
        innerRadius = _;
        return chart;
    };

    chart.numSegments = function (_) {
        if (!arguments.length) return numSegments;
        numSegments = _;
        return chart;
    };

    chart.segmentHeight = function (_) {
        if (!arguments.length) return segmentHeight;
        segmentHeight = _;
        return chart;
    };

    chart.domain = function (_) {
        if (!arguments.length) return domain;
        domain = _;
        return chart;
    };

    chart.range = function (_) {
        if (!arguments.length) return range;
        range = _;
        return chart;
    };

    chart.radialLabels = function (_) {
        if (!arguments.length) return radialLabels;
        if (_ == null) _ = [];
        radialLabels = _;
        return chart;
    };

    chart.segmentLabels = function (_) {
        if (!arguments.length) return segmentLabels;
        if (_ == null) _ = [];
        segmentLabels = _;
        return chart;
    };
    
    chart.accessor = function (_) {
        if (!arguments.length) return accessor;
        accessor = _;
        return chart;
    };
    
	chart.offset = function(value) {
			if (!arguments.length) return offset;
			offset = value;
			return chart;
	};
	
	chart._index = function(value) {
			if (!arguments.length) return _index;
			_index = value;
			return chart;
	};

	d3.rebind(chart, dispatch, "on");
    return chart;
    
};
    
})(d3);